**Анализатор прайс-листов**
=====================

**Описание проекта**
-----------------------------------
**PriceList** — это инструмент для анализа CSV-файлов с прайс-листами. Программа автоматически находит файлы, содержащие информацию о продуктах, извлекает данные о товарах (название, цена, вес), рассчитывает стоимость за килограмм и предоставляет удобный интерфейс для поиска. Поддерживает разные кодировки и разделители.

Функционал
-----------------------------------
1. **Автоматическое определение параметров файлов:**
   * Кодировка (с помощью библиотеки chardet).
   * Разделитель (, или ;).
2. **Обработка данных:**
   * Поиск нужных столбцов (название, цена, вес) по заголовкам.
   * Расчёт стоимости за килограмм.
   * Объединение данных из нескольких файлов.
3. **Интерфейс поиска:**
   * Поиск продуктов по названию.
   * Сортировка результатов по стоимости за килограмм.
4. **Экспорт:**
   * Экспорт всех данных в HTML-таблицу.

Описание классов и методов
-----------------------------------
**Класс PriceMachine**
1. __init__
   * Инициализирует объект класса.
   * self.data — список для хранения всех продуктов из CSV-файлов.
   * self.result — строка с результатами поиска.
   * self.name_length — используется для форматирования вывода (максимальная длина названия продукта).
     
2. **_detect_encoding(file_path)**
   * Определяет кодировку CSV-файла с помощью библиотеки chardet.
   * Читает первые 10 KB данных файла, чтобы определить наиболее вероятную кодировку.
   * Возвращает строку с названием кодировки.
    
3. **_detect_delimiter(file_path, encoding)**
   * Определяет разделитель (; или ,) в файле:
      * Считывает первую строку файла.
      * Если строка содержит ; и не содержит , разделитель — ;
      * В остальных случаях — ,
   * Возвращает найденный разделитель.
    
4. **load_prices(file_path='')**
   * Ищет файлы с названием, содержащим слово "price", в указанной папке.
   * Для каждого подходящего файла:
      * Определяет кодировку и разделитель.
      * Считывает заголовки (первую строку).
      * Определяет индексы столбцов для названия, цены и веса (метод _search_product_price_weight).
      * Читает данные строк и добавляет их в self.data, рассчитывая стоимость за килограмм.
      * Обновляет максимальную длину названия продукта для форматирования.
    
5. **_search_product_price_weight(headers)**
   * Ищет столбцы с названием, ценой и весом в заголовках.
   * Сопоставляет заголовки с предопределёнными ключевыми словами:
      * Название: {"товар", "название", "наименование", "продукт"}
      * Цена: {"цена", "розница"}
      * Вес: {"вес", "масса", "фасовка"}
   * Возвращает индексы найденных столбцов или None, если столбцы не найдены.
  
6. **export_to_html(fname='output.html')**
   * Генерирует HTML-страницу с таблицей всех продуктов.
   * В таблице отображаются:
      * Номер строки.
      * Название продукта.
      * Цена.
      * Вес.
      * Имя файла, из которого взят продукт.
      * Цена за килограмм.
   * Сохраняет HTML-файл на диск.
  
7. **find_text(text)**
   * Выполняет поиск продуктов, название которых содержит заданный текст (без учёта регистра).
   * Сортирует результаты по стоимости за килограмм.
   * Возвращает список найденных продуктов.
  
Главная логика программы
-----------------------------------
1. **Инициализация**
   * Создаётся экземпляр класса PriceList.
2. **Загрузка данных**
   * Метод load_prices загружает данные из файлов в папке. Пользователь указывает путь к папке через параметр file_path.
3. **Пользовательский ввод**
   * В бесконечном цикле пользователь вводит текст для поиска продуктов.
      * Если пользователь вводит exit, программа завершает работу.
      * Если вводится текст, метод find_text ищет продукты, соответствующие запросу.
      * Найденные продукты отображаются в консоли в табличном виде с колонками:
         * Номер.
         * Название.
         * Цена.
         * Вес.
         * Имя файла.
         * Цена за килограмм.
4. **Экспорт в HTML**
   * После завершения работы программа автоматически экспортирует данные в HTML-файл.
---------------------------
Программа позволяет работать с разными кодировками и разделителями CSV-файлов. Подходит для анализа и обработки прайс-листов с гибким выводом результатов.
